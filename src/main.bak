/* 
https://vulkan-tutorial.com/Development_environment#page_Vulkan-SDK
*/

#define GLFW_INCLUDE_VULKAN
#include <GLFW/glfw3.h>

#define GLM_FORCE_RADIANSwdfwe
#define GLM_FORCE_DEPTH_ZERO_TO_ONE
#include <vec4.hpp>
#include <mat4x4.hpp>

#include <iostream>
#include <vector>

int main() {

    /* glfwInit();   *******************************************
    initializes the GLFW library.
    *************************************************************/
    glfwInit();

    /* glfwWindowHint( [option], [value] ); *********************

    sets configuration options for the next window to be created.  
    like resizability, visibility, version of OpenGL

    glfwWindowHint(GLFW_CLIENT_API, GLFW_NO_API)
    = window not associated with any client API.

    *************************************************************/
    glfwWindowHint(GLFW_CLIENT_API, GLFW_NO_API);

    GLFWwindow* window = glfwCreateWindow(800, 600, "Vulkan window", nullptr, nullptr);

    /*  vkEnumerateInstanceExtensionProperties() ************************************

    VkResult vkEnumerateInstanceExtensionProperties(
    const char*                                 pLayerName,
    uint32_t*                                   pPropertyCount,
    VkExtensionProperties*                      pProperties);

    vkEnumerateInstanceExtensionProperties(nullptr, &extensionCount, nullptr);
    retrieve count of global extensions supported

    A common pattern is to call vkEnumerateInstanceExtensionProperties twice:
        1. Call with pProperties as NULL to get the count of available extensions.
            Allocate an array of VkExtensionProperties, size =count retrieved.
        2. Call again, passing the allocated array to populate details.

    *************************************************************/


    uint32_t extensionCount = 0;
    vkEnumerateInstanceExtensionProperties(nullptr, &extensionCount, nullptr);

    std::cout << extensionCount << " extensions supported\n";
    std::vector<VkExtensionProperties> extensions(extensionCount);
    vkEnumerateInstanceExtensionProperties(nullptr, &extensionCount, extensions.data());
    for (const auto& extension : extensions) {
        std::cout << '\t' << extension.extensionName << '\n';
    }

    glm::mat4 matrix;
    glm::vec4 vec;
    auto test = matrix * vec;

    while(!glfwWindowShouldClose(window)) {
        glfwPollEvents();
    }

    glfwDestroyWindow(window);

    glfwTerminate();

    return 0;
}